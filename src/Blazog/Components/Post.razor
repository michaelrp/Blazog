@inject IPostService PostService
@inject NavigationManager NavigationManager

<h1>@postInfo.Title</h1>
<p><TagLinks Tags="@postInfo.Tags"></TagLinks></p>
<hr />

<PostContent>@((MarkupString)postInfo.Html)</PostContent>

<div class="d-flex justify-content-center mt-4">
    <NavLink class="btn btn-outline-secondary mr-3" href="@($"/posts/{postInfo.PreviousLabel}")"
        title="@postInfo.PreviousTitle" Match="NavLinkMatch.All">
        <span class="oi oi-chevron-left"></span> Previous
    </NavLink>
    <NavLink class="btn btn-outline-secondary ml-3" href="@($"/posts/{postInfo.NextLabel}")"
        title="@postInfo.NextTitle" Match="NavLinkMatch.All">
        Next <span class="oi oi-chevron-right"></span>
    </NavLink>
</div>

@code {
    [Parameter]
    public string Label { get; set; }
    public PostInfo postInfo { get; set; }
    private string html { get; set; }

    protected override async Task OnParametersSetAsync()
    {
        if(string.IsNullOrEmpty(Label))
        {
            NavigationManager.NavigateTo("/posts");
        }

        postInfo = await PostService.GetPostAsync(Label);
    }
}